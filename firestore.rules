/**
 * @file Firestore Security Rules
 * @core_philosophy During the development phase, all CRUD operations are permitted for every path.
 * @data_structure
 *   /users/{userId}: Stores user profiles.
 *   /users/{userId}/personalVocabulary/{personalVocabularyId}: Stores user-specific vocabulary.
 *   /sessions/{sessionId}: Stores collaborative learning sessions.
 *   /sessions/{sessionId}/vocabularyCards/{vocabularyCardId}: Stores vocabulary cards for each session.
 * @key_security_decisions Development stage allows all operations for rapid iteration.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows any user to read or write user profiles during development.
     * @path /users/{userId}
     * @allow (create) - Any authenticated user can create a profile.
     * @allow (get) - Any user can get any user profile.
     * @allow (update) - Any user can update any user profile.
     * @allow (delete) - Any user can delete any user profile.
     * @principle Allows open access during development phase.
     */
    match /users/{userId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows any user to read or write personal vocabulary during development.
     * @path /users/{userId}/personalVocabulary/{personalVocabularyId}
     * @allow (create) - Any authenticated user can create a personal vocabulary entry.
     * @allow (get) - Any user can get any personal vocabulary entry.
     * @allow (update) - Any user can update any personal vocabulary entry.
     * @allow (delete) - Any user can delete any personal vocabulary entry.
     * @principle Allows open access during development phase.
     */
    match /users/{userId}/personalVocabulary/{personalVocabularyId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows any user to read or write sessions during development.
     * @path /sessions/{sessionId}
     * @allow (create) - Any authenticated user can create a session.
     * @allow (get) - Any user can get any session.
     * @allow (update) - Any user can update any session.
     * @allow (delete) - Any user can delete any session.
     * @principle Allows open access during development phase.
     */
    match /sessions/{sessionId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows any user to read or write vocabulary cards for sessions during development.
     * @path /sessions/{sessionId}/vocabularyCards/{vocabularyCardId}
     * @allow (create) - Any authenticated user can create a vocabulary card.
     * @allow (get) - Any user can get any vocabulary card.
     * @allow (update) - Any user can update any vocabulary card.
     * @allow (delete) - Any user can delete any vocabulary card.
     * @principle Allows open access during development phase.
     */
    match /sessions/{sessionId}/vocabularyCards/{vocabularyCardId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }
  }
}